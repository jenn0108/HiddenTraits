##########################################
#
# Furusiyya Tournament Events
#
# Event ID 88250 - 88499 is reserved
#
##########################################


# Invitation
character_event = {
	id = 88250
	title = "FURUSIYYATITLE"
	desc = "EVTDESC88250"
	picture = "GFX_evt_emissary_muslim"

	is_triggered_only = yes

	option = {
		name = "EVTOPTA88250"
		prestige = 50
		set_character_flag = attending_tournament_furusiyya
	}
	option = {
		name = "EVTOPTB88250"
		prestige = -100
	}
}

# Start of tournament
character_event = {
	id = 88251
	title = "FURUSIYYATITLE"
	desc = "EVTDESC88251"
	picture = "GFX_evt_feast"

	is_triggered_only = yes

	option = {
		name = "EVTOPTA88251"
		trigger = {
			war = no
		}
		hidden_tooltip = {
			set_character_flag = tournament_begins_furusiyya
			set_character_flag = attending_tournament_furusiyya
			location = {
				set_province_flag = tournament_60_days_furusiyya
			}
		}
	}
	option = {
		name = "EVTOPTB88251"
		trigger = {
			war = yes
		}
		wealth = 200
		prestige = -100
		decadence = 2
		hidden_tooltip = {
			any_realm_character = {
				limit = {
					has_character_flag = attending_tournament_furusiyya
				}
				character_event = { id = 88287 }
			}
		}
		clr_character_flag = epic_tournament_furusiyya
	}
}

# Tournament has been cancelled
character_event = {
	id = 88287
	title = "FURUSIYYATITLE"
	desc = "EVTDESC88287"
	picture = "GFX_evt_joust"

	is_triggered_only = yes

	option = {
		name = "EVTOPTA88287"
		prestige = -50
		clr_character_flag = attending_tournament_furusiyya
	}
}

# Message about death
character_event = {
	id = 88288
	title = "FURUSIYYATITLE"
	desc = "EVTDESC88288"
	picture = "GFX_evt_death"

	is_triggered_only = yes

	trigger = {
		NOT = { has_character_flag = no_msg_death_furusiyya }
		NOT = { has_character_flag = tournament_has_ended_furusiyya }
	}

	option = {
		name = "EVTOPTA88288"
	}
	option = {
		name = "EVTOPTB88288"
		set_character_flag = no_msg_death_furusiyya
	}
}

# Message about maimed
character_event = {
	id = 88289
	title = "FURUSIYYATITLE"
	desc = "EVTDESC88289"
	picture = "GFX_evt_emissary"

	is_triggered_only = yes

	trigger = {
		NOT = { has_character_flag = no_msg_maimed_furusiyya }
		NOT = { has_character_flag = tournament_has_ended_furusiyya }
	}

	option = {
		name = "EVTOPTA88289"
	}
	option = {
		name = "EVTOPTB88289"
		set_character_flag = no_msg_maimed_furusiyya
	}
}

# Message about wounded
character_event = {
	id = 88290
	title = "FURUSIYYATITLE"
	desc = "EVTDESC88290"
	picture = "GFX_evt_emissary"

	trigger = {
		NOT = { has_character_flag = no_msg_wounded_furusiyya }
		NOT = { has_character_flag = tournament_has_ended_furusiyya }
	}

	is_triggered_only = yes

	option = {
		name = "EVTOPTA88290"
	}
	option = {
		name = "EVTOPTB88290"
		set_character_flag = no_msg_wounded_furusiyya
	}
}

# Tournament is over
province_event = {
	id = 88252
	title = "FURUSIYYATITLE"
	desc = "EVTDESC88252"
	picture = "GFX_evt_joust"

	trigger = {
		OR = {
			owner = {
				had_character_flag = {
					flag = tournament_begins_furusiyya
					days = 365
				}
			}
			had_province_flag = {
				flag = tournament_60_days_furusiyya
				days = 60
			}
		}
		OR = {
			owner = {
				had_character_flag = {
					flag = tournament_begins_furusiyya
					days = 365
				}
			}
			owner = {
				has_character_flag = winner_furusiyya
				has_character_flag = second_place_furusiyya
				has_character_flag = third_place_furusiyya
			}
		}
	}

	mean_time_to_happen = {
		days = 1
	}

	option = {
		name = "EVTOPTA88252"
		clr_province_flag = tournament_60_days_furusiyya
		owner = {
			clr_character_flag = tournament_begins_furusiyya
			clr_character_flag = winner_furusiyya
			clr_character_flag = second_place_furusiyya
			clr_character_flag = third_place_furusiyya
			clr_character_flag = attending_tournament_furusiyya
			clr_character_flag = attending_tournament_event_furusiyya
			clr_character_flag = tournament_third_place_furusiyya
			clr_character_flag = tournament_second_place_furusiyya
			clr_character_flag = tournament_winner_furusiyya
			set_character_flag = tournament_has_ended_furusiyya
			any_realm_character = {
				limit = {
					has_character_flag = attending_tournament_furusiyya
					OR = {
						has_character_flag = tournament_third_place_furusiyya
						has_character_flag = tournament_second_place_furusiyya
						has_character_flag = tournament_winner_furusiyya
					}
				}
				set_character_flag = tournament_has_ended_furusiyya
				clr_character_flag = tournament_third_place_furusiyya
				clr_character_flag = tournament_second_place_furusiyya
				clr_character_flag = tournament_winner_furusiyya
				opinion = {
					modifier = opinion_tournament_participant
					who = PREV
					years = 2
				}
				clr_character_flag = attending_tournament_furusiyya
				clr_character_flag = attending_tournament_event_furusiyya
			}
			any_realm_character = {
				limit = {
					has_character_flag = attending_tournament_furusiyya
					NOT = {
						character = PREV
					}
					NOT = {
						has_character_flag = tournament_third_place_furusiyya
					}
					NOT = {
						has_character_flag = tournament_second_place_furusiyya
					}
					NOT = {
						has_character_flag = tournament_winner_furusiyya
					}
				}
				hidden_tooltip = {
					random_list = {
						10 = {
							character_event = { id = 88253 }
						}
						10 = {
							character_event = { id = 88254 }
						}
						10 = {
							character_event = { id = 88255 }
						}
						10 = {
							character_event = { id = 88256 }
						}
						10 = {
							character_event = { id = 88257 }
						}
						10 = {
							character_event = { id = 88258 }
						}
					}
				}
				opinion = {
					modifier = opinion_tournament_participant
					who = PREV
					years = 2
				}
				set_character_flag = tournament_has_ended_furusiyya
				clr_character_flag = attending_tournament_furusiyya
				clr_character_flag = attending_tournament_event_furusiyya
			}
		}
	}
}

# End of tournament event
character_event = {
	id = 88253
	title = "FURUSIYYATITLE"
	desc = "EVTDESC88253"
	picture = "GFX_evt_joust"

	is_triggered_only = yes

	option = {
		name = "EVTOPTA88253"
		prestige = 50
	}
}

# End of tournament event
character_event = {
	id = 88254
	title = "FURUSIYYATITLE"
	desc = "EVTDESC88254"
	picture = "GFX_evt_joust"

	is_triggered_only = yes

	option = {
		name = "EVTOPTA88254"
		prestige = 100
	}
}

# End of tournament event
character_event = {
	id = 88255
	title = "FURUSIYYATITLE"
	desc = "EVTDESC88255"
	picture = "GFX_evt_joust"

	is_triggered_only = yes

	option = {
		name = "EVTOPTA88255"
		prestige = -50
	}
}

# End of tournament event
character_event = {
	id = 88256
	title = "FURUSIYYATITLE"
	desc = "EVTDESC88256"
	picture = "GFX_evt_joust"

	is_triggered_only = yes

	option = {
		name = "EVTOPTA88256"
		prestige = -100
	}
}

# End of tournament event
character_event = {
	id = 88257
	title = "FURUSIYYATITLE"
	desc = "EVTDESC88257"
	picture = "GFX_evt_joust"

	is_triggered_only = yes

	option = {
		name = "EVTOPTA88257"
		change_martial = 1
	}
}

# End of tournament event
character_event = {
	id = 88258
	title = "FURUSIYYATITLE"
	desc = "EVTDESC88258"
	picture = "GFX_evt_joust"

	is_triggered_only = yes

	option = {
		name = "EVTOPTA88258"
		change_martial = -1
	}
}

# Character is killed
character_event = {
	id = 88259
	title = "FURUSIYYATITLE"
	desc = "EVTDESC88259"
	picture = "GFX_evt_death"

	min_age = 16
	only_men = yes
	capable_only = yes
	prisoner = no

	trigger = {
		has_character_flag = attending_tournament_furusiyya
		NOT = {
			has_character_flag = tournament_has_ended_furusiyya
		}
		top_liege = {
			has_character_flag = tournament_begins_furusiyya
			NOT = {
				has_character_flag = tournament_has_ended_furusiyya
			}
		}
	}

	mean_time_to_happen = {
		months = 1000
		modifier = {
			factor = 1.1
			martial = 20
		}
		modifier = {
			factor = 1.1
			martial = 19
		}
		modifier = {
			factor = 1.1
			martial = 18
		}
		modifier = {
			factor = 1.1
			martial = 17
		}
		modifier = {
			factor = 1.1
			martial = 16
		}
		modifier = {
			factor = 1.1
			martial = 15
		}
		modifier = {
			factor = 1.1
			martial = 14
		}
		modifier = {
			factor = 1.1
			martial = 13
		}
		modifier = {
			factor = 1.1
			martial = 12
		}
		modifier = {
			factor = 1.1
			martial = 11
		}
		modifier = {
			factor = 0.9
			NOT = { martial = 10 }
		}
		modifier = {
			factor = 0.9
			NOT = { martial = 9 }
		}
		modifier = {
			factor = 0.9
			NOT = { martial = 8 }
		}
		modifier = {
			factor = 0.9
			NOT = { martial = 7 }
		}
		modifier = {
			factor = 0.9
			NOT = { martial = 6 }
		}
		modifier = {
			factor = 0.9
			NOT = { martial = 5 }
		}
		modifier = {
			factor = 0.9
			NOT = { martial = 4 }
		}
		modifier = {
			factor = 0.9
			NOT = { martial = 3 }
		}
		modifier = {
			factor = 0.9
			NOT = { martial = 2 }
		}
		modifier = {
			factor = 0.9
			NOT = { martial = 1 }
		}
		modifier = {
			factor = 2
			OR = {
				trait = craven
				trait = craven_hidden
			}
		}
		modifier = {
			factor = 0.5
			OR = {
				trait = brave
				trait = brave_hidden
			}
		}
		modifier = {
			factor = 0.5
			OR = {
				trait = maimed
				trait = maimed_hidden
			}
		}
	}

	immediate = {
		clr_character_flag = attending_tournament_furusiyya
	}

	option = {
		name = "EVTOPTA88259"
		death = {
			death_reason = death_battle
		}
		hidden_tooltip = {
			if = {
				limit = {
					top_liege = {
						NOT = {
							character = ROOT
						}
					}
				}
				top_liege = { character_event = { id = 88288  } }
			}
		}
	}
}

# Character is maimed
character_event = {
	id = 88260
	title = "FURUSIYYATITLE"
	desc = "EVTDESC88260"
	picture = "GFX_evt_melee"

	min_age = 16
	only_men = yes
	capable_only = yes
	prisoner = no

	trigger = {
		has_character_flag = attending_tournament_furusiyya
		NOT = {
			OR = {
				trait = maimed
				trait = maimed_hidden
			}
		}
		NOT = {
			has_character_flag = tournament_has_ended_furusiyya
		}
		top_liege = {
			has_character_flag = tournament_begins_furusiyya
			NOT = {
				has_character_flag = tournament_has_ended_furusiyya
			}
		}
	}

	mean_time_to_happen = {
		months = 800
		modifier = {
			factor = 1.1
			martial = 20
		}
		modifier = {
			factor = 1.1
			martial = 19
		}
		modifier = {
			factor = 1.1
			martial = 18
		}
		modifier = {
			factor = 1.1
			martial = 17
		}
		modifier = {
			factor = 1.1
			martial = 16
		}
		modifier = {
			factor = 1.1
			martial = 15
		}
		modifier = {
			factor = 1.1
			martial = 14
		}
		modifier = {
			factor = 1.1
			martial = 13
		}
		modifier = {
			factor = 1.1
			martial = 12
		}
		modifier = {
			factor = 1.1
			martial = 11
		}
		modifier = {
			factor = 0.9
			NOT = { martial = 10 }
		}
		modifier = {
			factor = 0.9
			NOT = { martial = 9 }
		}
		modifier = {
			factor = 0.9
			NOT = { martial = 8 }
		}
		modifier = {
			factor = 0.9
			NOT = { martial = 7 }
		}
		modifier = {
			factor = 0.9
			NOT = { martial = 6 }
		}
		modifier = {
			factor = 0.9
			NOT = { martial = 5 }
		}
		modifier = {
			factor = 0.9
			NOT = { martial = 4 }
		}
		modifier = {
			factor = 0.9
			NOT = { martial = 3 }
		}
		modifier = {
			factor = 0.9
			NOT = { martial = 2 }
		}
		modifier = {
			factor = 0.9
			NOT = { martial = 1 }
		}
		modifier = {
			factor = 2
			OR = {
				trait = craven
				trait = craven_hidden
			}
		}
		modifier = {
			factor = 0.5
			OR = {
				trait = brave
				trait = brave_hidden
			}
		}
		modifier = {
			factor = 0.5
			OR = {
				trait = wounded
				trait = wounded_hidden
			}
		}
	}

	immediate = {
		clr_character_flag = attending_tournament_furusiyya
	}

	option = {
		name = "EVTOPTA88260"
		add_trait = maimed_hidden
		hidden_tooltip = {
			if = {
				limit = {
					top_liege = {
						NOT = {
							character = ROOT
						}
					}
				}
				top_liege = { character_event = { id = 88289 } }
			}
		}
	}
}

# Character is wounded
character_event = {
	id = 88261
	title = "FURUSIYYATITLE"
	desc = "EVTDESC88261"
	picture = "GFX_evt_council"

	min_age = 16
	only_men = yes
	capable_only = yes
	prisoner = no

	trigger = {
		has_character_flag = attending_tournament_furusiyya
		NOT = { has_character_flag = attending_tournament_event_furusiyya }
		NOT = {
			has_character_flag = tournament_has_ended_furusiyya
		}
		NOT = {
			OR = {
				trait = wounded
				trait = wounded_hidden
			}
		}
		NOT = {
			OR = {
				trait = maimed
				trait = maimed_hidden
			}
		}
		top_liege = {
			has_character_flag = tournament_begins_furusiyya
			NOT = {
				has_character_flag = tournament_has_ended_furusiyya
			}
		}
	}

	mean_time_to_happen = {
		months = 500
		modifier = {
			factor = 1.1
			martial = 20
		}
		modifier = {
			factor = 1.1
			martial = 19
		}
		modifier = {
			factor = 1.1
			martial = 18
		}
		modifier = {
			factor = 1.1
			martial = 17
		}
		modifier = {
			factor = 1.1
			martial = 16
		}
		modifier = {
			factor = 1.1
			martial = 15
		}
		modifier = {
			factor = 1.1
			martial = 14
		}
		modifier = {
			factor = 1.1
			martial = 13
		}
		modifier = {
			factor = 1.1
			martial = 12
		}
		modifier = {
			factor = 1.1
			martial = 11
		}
		modifier = {
			factor = 0.9
			NOT = { martial = 10 }
		}
		modifier = {
			factor = 0.9
			NOT = { martial = 9 }
		}
		modifier = {
			factor = 0.9
			NOT = { martial = 8 }
		}
		modifier = {
			factor = 0.9
			NOT = { martial = 7 }
		}
		modifier = {
			factor = 0.9
			NOT = { martial = 6 }
		}
		modifier = {
			factor = 0.9
			NOT = { martial = 5 }
		}
		modifier = {
			factor = 0.9
			NOT = { martial = 4 }
		}
		modifier = {
			factor = 0.9
			NOT = { martial = 3 }
		}
		modifier = {
			factor = 0.9
			NOT = { martial = 2 }
		}
		modifier = {
			factor = 0.9
			NOT = { martial = 1 }
		}
		modifier = {
			factor = 2
			OR = {
				trait = craven
				trait = craven_hidden
			}
		}
		modifier = {
			factor = 0.5
			OR = {
				trait = brave
				trait = brave_hidden
			}
		}
	}

	immediate = {
		set_character_flag = attending_tournament_event_furusiyya
	}

	option = {
		name = "EVTOPTA88261"
		add_trait = wounded_hidden
		hidden_tooltip = {
			if = {
				limit = {
					top_liege = {
						NOT = {
							character = ROOT
						}
					}
				}
				top_liege = { character_event = { id = 88290 } }
			}
		}
	}
}

# Character becomes craven
character_event = {
	id = 88262
	title = "FURUSIYYATITLE"
	desc = "EVTDESC88262"
	picture = "GFX_evt_melee"

	min_age = 16
	only_men = yes
	capable_only = yes
	prisoner = no

	trigger = {
		has_character_flag = attending_tournament_furusiyya
		NOT = { has_character_flag = attending_tournament_event_furusiyya }
		NOT = {
			has_character_flag = tournament_has_ended_furusiyya
		}
		NOT = {
			OR = {
				trait = craven
				trait = craven_hidden
			}
		}
		top_liege = {
			has_character_flag = tournament_begins_furusiyya
			NOT = {
				has_character_flag = tournament_has_ended_furusiyya
			}
		}
	}

	mean_time_to_happen = {
		months = 250
		modifier = {
			factor = 1.1
			martial = 20
		}
		modifier = {
			factor = 1.1
			martial = 19
		}
		modifier = {
			factor = 1.1
			martial = 18
		}
		modifier = {
			factor = 1.1
			martial = 17
		}
		modifier = {
			factor = 1.1
			martial = 16
		}
		modifier = {
			factor = 1.1
			martial = 15
		}
		modifier = {
			factor = 1.1
			martial = 14
		}
		modifier = {
			factor = 1.1
			martial = 13
		}
		modifier = {
			factor = 1.1
			martial = 12
		}
		modifier = {
			factor = 1.1
			martial = 11
		}
		modifier = {
			factor = 0.9
			NOT = { martial = 10 }
		}
		modifier = {
			factor = 0.9
			NOT = { martial = 9 }
		}
		modifier = {
			factor = 0.9
			NOT = { martial = 8 }
		}
		modifier = {
			factor = 0.9
			NOT = { martial = 7 }
		}
		modifier = {
			factor = 0.9
			NOT = { martial = 6 }
		}
		modifier = {
			factor = 0.9
			NOT = { martial = 5 }
		}
		modifier = {
			factor = 0.9
			NOT = { martial = 4 }
		}
		modifier = {
			factor = 0.9
			NOT = { martial = 3 }
		}
		modifier = {
			factor = 0.9
			NOT = { martial = 2 }
		}
		modifier = {
			factor = 0.9
			NOT = { martial = 1 }
		}
	}

	immediate = {
		set_character_flag = attending_tournament_event_furusiyya
	}

	option = {
		name = "EVTOPTA88262"
		add_trait = craven_hidden
	}
}

# Character becomes brave
character_event = {
	id = 88263
	title = "FURUSIYYATITLE"
	desc = "EVTDESC88263"
	picture = "GFX_evt_melee"

	min_age = 16
	only_men = yes
	capable_only = yes
	prisoner = no

	trigger = {
		has_character_flag = attending_tournament_furusiyya
		NOT = { has_character_flag = attending_tournament_event_furusiyya }
		NOT = {
			has_character_flag = tournament_has_ended_furusiyya
		}
		NOT = {
			OR = {
				trait = brave
				trait = brave_hidden
			}
		}
		top_liege = {
			has_character_flag = tournament_begins_furusiyya
			NOT = {
				has_character_flag = tournament_has_ended_furusiyya
			}
		}
	}

	mean_time_to_happen = {
		months = 250
		modifier = {
			factor = 0.9
			martial = 20
		}
		modifier = {
			factor = 0.9
			martial = 19
		}
		modifier = {
			factor = 0.9
			martial = 18
		}
		modifier = {
			factor = 0.9
			martial = 17
		}
		modifier = {
			factor = 0.9
			martial = 16
		}
		modifier = {
			factor = 0.9
			martial = 15
		}
		modifier = {
			factor = 0.9
			martial = 14
		}
		modifier = {
			factor = 0.9
			martial = 13
		}
		modifier = {
			factor = 0.9
			martial = 12
		}
		modifier = {
			factor = 0.9
			martial = 11
		}
		modifier = {
			factor = 1.1
			NOT = { martial = 10 }
		}
		modifier = {
			factor = 1.1
			NOT = { martial = 9 }
		}
		modifier = {
			factor = 1.1
			NOT = { martial = 8 }
		}
		modifier = {
			factor = 1.1
			NOT = { martial = 7 }
		}
		modifier = {
			factor = 1.1
			NOT = { martial = 6 }
		}
		modifier = {
			factor = 1.1
			NOT = { martial = 5 }
		}
		modifier = {
			factor = 1.1
			NOT = { martial = 4 }
		}
		modifier = {
			factor = 1.1
			NOT = { martial = 3 }
		}
		modifier = {
			factor = 1.1
			NOT = { martial = 2 }
		}
		modifier = {
			factor = 1.1
			NOT = { martial = 1 }
		}
	}

	immediate = {
		set_character_flag = attending_tournament_event_furusiyya
	}

	option = {
		name = "EVTOPTA88263"
		add_trait = brave_hidden
	}
}

# Character becomes tough soldier
character_event = {
	id = 88264
	title = "FURUSIYYATITLE"
	desc = "EVTDESC88264"
	picture = "GFX_evt_melee"

	min_age = 16
	only_men = yes
	capable_only = yes
	prisoner = no

	trigger = {
		has_character_flag = attending_tournament_furusiyya
		NOT = { has_character_flag = attending_tournament_event_furusiyya }
		NOT = {
			has_character_flag = tournament_has_ended_furusiyya
		}
		OR = {
			trait = misguided_warrior
			trait = misguided_warrior_hidden
		}
		top_liege = {
			has_character_flag = tournament_begins_furusiyya
			NOT = {
				has_character_flag = tournament_has_ended_furusiyya
			}
		}
	}

	mean_time_to_happen = {
		months = 250
		modifier = {
			factor = 0.9
			martial = 20
		}
		modifier = {
			factor = 0.9
			martial = 19
		}
		modifier = {
			factor = 0.9
			martial = 18
		}
		modifier = {
			factor = 0.9
			martial = 17
		}
		modifier = {
			factor = 0.9
			martial = 16
		}
		modifier = {
			factor = 0.9
			martial = 15
		}
		modifier = {
			factor = 0.9
			martial = 14
		}
		modifier = {
			factor = 0.9
			martial = 13
		}
		modifier = {
			factor = 0.9
			martial = 12
		}
		modifier = {
			factor = 0.9
			martial = 11
		}
		modifier = {
			factor = 1.1
			NOT = { martial = 10 }
		}
		modifier = {
			factor = 1.1
			NOT = { martial = 9 }
		}
		modifier = {
			factor = 1.1
			NOT = { martial = 8 }
		}
		modifier = {
			factor = 1.1
			NOT = { martial = 7 }
		}
		modifier = {
			factor = 1.1
			NOT = { martial = 6 }
		}
		modifier = {
			factor = 1.1
			NOT = { martial = 5 }
		}
		modifier = {
			factor = 1.1
			NOT = { martial = 4 }
		}
		modifier = {
			factor = 1.1
			NOT = { martial = 3 }
		}
		modifier = {
			factor = 1.1
			NOT = { martial = 2 }
		}
		modifier = {
			factor = 1.1
			NOT = { martial = 1 }
		}
	}

	immediate = {
		set_character_flag = attending_tournament_event_furusiyya
	}

	option = {
		name = "EVTOPTA88264"
		remove_trait = misguided_warrior
		remove_trait = misguided_warrior_hidden
		add_trait = tough_soldier_hidden
	}
}

# Character becomes skilled tactician
character_event = {
	id = 88265
	title = "FURUSIYYATITLE"
	desc = "EVTDESC88265"
	picture = "GFX_evt_melee"

	min_age = 16
	only_men = yes
	capable_only = yes
	prisoner = no

	trigger = {
		has_character_flag = attending_tournament_furusiyya
		NOT = { has_character_flag = attending_tournament_event_furusiyya }
		NOT = {
			has_character_flag = tournament_has_ended_furusiyya
		}
		OR = {
			trait = tough_soldier
			trait = tough_soldier_hidden
		} 
		top_liege = {
			has_character_flag = tournament_begins_furusiyya
			NOT = {
				has_character_flag = tournament_has_ended_furusiyya
			}
		}
	}

	mean_time_to_happen = {
		months = 250
		modifier = {
			factor = 0.9
			martial = 20
		}
		modifier = {
			factor = 0.9
			martial = 19
		}
		modifier = {
			factor = 0.9
			martial = 18
		}
		modifier = {
			factor = 0.9
			martial = 17
		}
		modifier = {
			factor = 0.9
			martial = 16
		}
		modifier = {
			factor = 0.9
			martial = 15
		}
		modifier = {
			factor = 0.9
			martial = 14
		}
		modifier = {
			factor = 0.9
			martial = 13
		}
		modifier = {
			factor = 0.9
			martial = 12
		}
		modifier = {
			factor = 0.9
			martial = 11
		}
		modifier = {
			factor = 1.1
			NOT = { martial = 10 }
		}
		modifier = {
			factor = 1.1
			NOT = { martial = 9 }
		}
		modifier = {
			factor = 1.1
			NOT = { martial = 8 }
		}
		modifier = {
			factor = 1.1
			NOT = { martial = 7 }
		}
		modifier = {
			factor = 1.1
			NOT = { martial = 6 }
		}
		modifier = {
			factor = 1.1
			NOT = { martial = 5 }
		}
		modifier = {
			factor = 1.1
			NOT = { martial = 4 }
		}
		modifier = {
			factor = 1.1
			NOT = { martial = 3 }
		}
		modifier = {
			factor = 1.1
			NOT = { martial = 2 }
		}
		modifier = {
			factor = 1.1
			NOT = { martial = 1 }
		}
	}

	immediate = {
		set_character_flag = attending_tournament_event_furusiyya
	}

	option = {
		name = "EVTOPTA88265"
		remove_trait = tough_soldier
		remove_trait = tough_soldier_hidden 
		add_trait = skilled_tactician_hidden
	}
}

# Character becomes brilliant strategist
character_event = {
	id = 88266
	title = "FURUSIYYATITLE"
	desc = "EVTDESC88266"
	picture = "GFX_evt_council"

	min_age = 16
	only_men = yes
	capable_only = yes
	prisoner = no

	trigger = {
		has_character_flag = attending_tournament_furusiyya
		NOT = { has_character_flag = attending_tournament_event_furusiyya }
		NOT = {
			has_character_flag = tournament_has_ended_furusiyya
		}
		OR = {
			trait = skilled_tactician
			trait = skilled_tactician_hidden
		} 
		top_liege = {
			has_character_flag = tournament_begins_furusiyya
			NOT = {
				has_character_flag = tournament_has_ended_furusiyya
			}
		}
	}

	mean_time_to_happen = {
		months = 250
		modifier = {
			factor = 0.9
			martial = 20
		}
		modifier = {
			factor = 0.9
			martial = 19
		}
		modifier = {
			factor = 0.9
			martial = 18
		}
		modifier = {
			factor = 0.9
			martial = 17
		}
		modifier = {
			factor = 0.9
			martial = 16
		}
		modifier = {
			factor = 0.9
			martial = 15
		}
		modifier = {
			factor = 0.9
			martial = 14
		}
		modifier = {
			factor = 0.9
			martial = 13
		}
		modifier = {
			factor = 0.9
			martial = 12
		}
		modifier = {
			factor = 0.9
			martial = 11
		}
		modifier = {
			factor = 1.1
			NOT = { martial = 10 }
		}
		modifier = {
			factor = 1.1
			NOT = { martial = 9 }
		}
		modifier = {
			factor = 1.1
			NOT = { martial = 8 }
		}
		modifier = {
			factor = 1.1
			NOT = { martial = 7 }
		}
		modifier = {
			factor = 1.1
			NOT = { martial = 6 }
		}
		modifier = {
			factor = 1.1
			NOT = { martial = 5 }
		}
		modifier = {
			factor = 1.1
			NOT = { martial = 4 }
		}
		modifier = {
			factor = 1.1
			NOT = { martial = 3 }
		}
		modifier = {
			factor = 1.1
			NOT = { martial = 2 }
		}
		modifier = {
			factor = 1.1
			NOT = { martial = 1 }
		}
	}

	immediate = {
		set_character_flag = attending_tournament_event_furusiyya
	}

	option = {
		name = "EVTOPTA88266"
		remove_trait = skilled_tactician
		remove_trait = skilled_tactician_hidden 
		add_trait = brilliant_strategist_hidden
	}
}

# Character becomes skilled tactician
character_event = {
	id = 88267
	title = "FURUSIYYATITLE"
	desc = "EVTDESC88267"
	picture = "GFX_evt_melee"

	min_age = 16
	only_men = yes
	capable_only = yes
	prisoner = no

	trigger = {
		has_character_flag = attending_tournament_furusiyya
		NOT = { has_character_flag = attending_tournament_event_furusiyya }
		NOT = {
			has_character_flag = tournament_has_ended_furusiyya
		}
		OR = {
			trait = brilliant_strategist
			trait = brilliant_strategist_hidden
		} 
		top_liege = {
			has_character_flag = tournament_begins_furusiyya
			NOT = {
				has_character_flag = tournament_has_ended_furusiyya
			}
		}
	}

	mean_time_to_happen = {
		months = 250
		modifier = {
			factor = 1.1
			martial = 20
		}
		modifier = {
			factor = 1.1
			martial = 19
		}
		modifier = {
			factor = 1.1
			martial = 18
		}
		modifier = {
			factor = 1.1
			martial = 17
		}
		modifier = {
			factor = 1.1
			martial = 16
		}
		modifier = {
			factor = 1.1
			martial = 15
		}
		modifier = {
			factor = 1.1
			martial = 14
		}
		modifier = {
			factor = 1.1
			martial = 13
		}
		modifier = {
			factor = 1.1
			martial = 12
		}
		modifier = {
			factor = 1.1
			martial = 11
		}
		modifier = {
			factor = 0.9
			NOT = { martial = 10 }
		}
		modifier = {
			factor = 0.9
			NOT = { martial = 9 }
		}
		modifier = {
			factor = 0.9
			NOT = { martial = 8 }
		}
		modifier = {
			factor = 0.9
			NOT = { martial = 7 }
		}
		modifier = {
			factor = 0.9
			NOT = { martial = 6 }
		}
		modifier = {
			factor = 0.9
			NOT = { martial = 5 }
		}
		modifier = {
			factor = 0.9
			NOT = { martial = 4 }
		}
		modifier = {
			factor = 0.9
			NOT = { martial = 3 }
		}
		modifier = {
			factor = 0.9
			NOT = { martial = 2 }
		}
		modifier = {
			factor = 0.9
			NOT = { martial = 1 }
		}
	}

	immediate = {
		set_character_flag = attending_tournament_event_furusiyya
	}

	option = {
		name = "EVTOPTA88267"
		remove_trait = brilliant_strategist
		remove_trait = brilliant_strategist_hidden
		add_trait = skilled_tactician_hidden
	}
}

# Character becomes tough soldier
character_event = {
	id = 88268
	title = "FURUSIYYATITLE"
	desc = "EVTDESC88268"
	picture = "GFX_evt_council"

	min_age = 16
	only_men = yes
	capable_only = yes
	prisoner = no

	trigger = {
		has_character_flag = attending_tournament_furusiyya
		NOT = { has_character_flag = attending_tournament_event_furusiyya }
		NOT = {
			has_character_flag = tournament_has_ended_furusiyya
		}
		OR = {
			trait = skilled_tactician
			trait = skilled_tactician_hidden
		} 
		top_liege = {
			has_character_flag = tournament_begins_furusiyya
			NOT = {
				has_character_flag = tournament_has_ended_furusiyya
			}
		}
	}

	mean_time_to_happen = {
		months = 250
		modifier = {
			factor = 1.1
			martial = 20
		}
		modifier = {
			factor = 1.1
			martial = 19
		}
		modifier = {
			factor = 1.1
			martial = 18
		}
		modifier = {
			factor = 1.1
			martial = 17
		}
		modifier = {
			factor = 1.1
			martial = 16
		}
		modifier = {
			factor = 1.1
			martial = 15
		}
		modifier = {
			factor = 1.1
			martial = 14
		}
		modifier = {
			factor = 1.1
			martial = 13
		}
		modifier = {
			factor = 1.1
			martial = 12
		}
		modifier = {
			factor = 1.1
			martial = 11
		}
		modifier = {
			factor = 0.9
			NOT = { martial = 10 }
		}
		modifier = {
			factor = 0.9
			NOT = { martial = 9 }
		}
		modifier = {
			factor = 0.9
			NOT = { martial = 8 }
		}
		modifier = {
			factor = 0.9
			NOT = { martial = 7 }
		}
		modifier = {
			factor = 0.9
			NOT = { martial = 6 }
		}
		modifier = {
			factor = 0.9
			NOT = { martial = 5 }
		}
		modifier = {
			factor = 0.9
			NOT = { martial = 4 }
		}
		modifier = {
			factor = 0.9
			NOT = { martial = 3 }
		}
		modifier = {
			factor = 0.9
			NOT = { martial = 2 }
		}
		modifier = {
			factor = 0.9
			NOT = { martial = 1 }
		}
	}

	immediate = {
		set_character_flag = attending_tournament_event_furusiyya
	}

	option = {
		name = "EVTOPTA88268"
		remove_trait = skilled_tactician
		remove_trait = skilled_tactician_hidden
		add_trait = tough_soldier_hidden
	}
}

# Character becomes misguided warrior
character_event = {
	id = 88269
	title = "FURUSIYYATITLE"
	desc = "EVTDESC88269"
	picture = "GFX_evt_melee"

	min_age = 16
	only_men = yes
	capable_only = yes
	prisoner = no

	trigger = {
		has_character_flag = attending_tournament_furusiyya
		NOT = { has_character_flag = attending_tournament_event_furusiyya }
		NOT = {
			has_character_flag = tournament_has_ended_furusiyya
		}
		OR = {
			trait = tough_soldier
			trait = tough_soldier_hidden
		}
		top_liege = {
			has_character_flag = tournament_begins_furusiyya
			NOT = {
				has_character_flag = tournament_has_ended_furusiyya
			}
		}
	}

	mean_time_to_happen = {
		months = 250
		modifier = {
			factor = 1.1
			martial = 20
		}
		modifier = {
			factor = 1.1
			martial = 19
		}
		modifier = {
			factor = 1.1
			martial = 18
		}
		modifier = {
			factor = 1.1
			martial = 17
		}
		modifier = {
			factor = 1.1
			martial = 16
		}
		modifier = {
			factor = 1.1
			martial = 15
		}
		modifier = {
			factor = 1.1
			martial = 14
		}
		modifier = {
			factor = 1.1
			martial = 13
		}
		modifier = {
			factor = 1.1
			martial = 12
		}
		modifier = {
			factor = 1.1
			martial = 11
		}
		modifier = {
			factor = 0.9
			NOT = { martial = 10 }
		}
		modifier = {
			factor = 0.9
			NOT = { martial = 9 }
		}
		modifier = {
			factor = 0.9
			NOT = { martial = 8 }
		}
		modifier = {
			factor = 0.9
			NOT = { martial = 7 }
		}
		modifier = {
			factor = 0.9
			NOT = { martial = 6 }
		}
		modifier = {
			factor = 0.9
			NOT = { martial = 5 }
		}
		modifier = {
			factor = 0.9
			NOT = { martial = 4 }
		}
		modifier = {
			factor = 0.9
			NOT = { martial = 3 }
		}
		modifier = {
			factor = 0.9
			NOT = { martial = 2 }
		}
		modifier = {
			factor = 0.9
			NOT = { martial = 1 }
		}
	}

	immediate = {
		set_character_flag = attending_tournament_event_furusiyya
	}

	option = {
		name = "EVTOPTA88269"
		remove_trait = tough_soldier
		remove_trait = tough_soldier_hidden
		add_trait = misguided_warrior_hidden
	}
}

# Character wins the tournament
character_event = {
	id = 88270
	title = "FURUSIYYATITLE"
	desc = "EVTDESC88270"
	picture = "GFX_evt_melee"

	min_age = 16
	only_men = yes
	capable_only = yes
	prisoner = no

	trigger = {
		has_character_flag = attending_tournament_furusiyya
		NOT = {
			has_character_flag = tournament_has_ended_furusiyya
		}
		top_liege = {
			had_character_flag = { flag = tournament_begins_furusiyya days = 50 }
			NOT = {
				has_character_flag = winner_furusiyya
			}
			NOT = {
				has_character_flag = tournament_has_ended_furusiyya
			}
		}
	}

	mean_time_to_happen = {
		months = 10
		modifier = {
			factor = 0.5
			top_liege = {
				had_character_flag = { flag = tournament_begins_furusiyya days = 60 }
			}
		}
		modifier = {
			factor = 0.5
			top_liege = {
				had_character_flag = { flag = tournament_begins_furusiyya days = 70 }
			}
		}
		modifier = {
			factor = 0.5
			top_liege = {
				had_character_flag = { flag = tournament_begins_furusiyya days = 80 }
			}
		}
		modifier = {
			factor = 0.5
			top_liege = {
				had_character_flag = { flag = tournament_begins_furusiyya days = 90 }
			}
		}
		modifier = {
			factor = 0.5
			top_liege = {
				had_character_flag = { flag = tournament_begins_furusiyya days = 100 }
			}
		}
		modifier = {
			factor = 0.75
			martial = 20
		}
		modifier = {
			factor = 0.75
			martial = 19
		}
		modifier = {
			factor = 0.75
			martial = 18
		}
		modifier = {
			factor = 0.75
			martial = 17
		}
		modifier = {
			factor = 0.75
			martial = 16
		}
		modifier = {
			factor = 0.75
			martial = 15
		}
		modifier = {
			factor = 0.75
			martial = 14
		}
		modifier = {
			factor = 0.75
			martial = 13
		}
		modifier = {
			factor = 0.75
			martial = 12
		}
		modifier = {
			factor = 0.75
			martial = 11
		}
		modifier = {
			factor = 1.25
			NOT = { martial = 10 }
		}
		modifier = {
			factor = 1.25
			NOT = { martial = 9 }
		}
		modifier = {
			factor = 1.25
			NOT = { martial = 8 }
		}
		modifier = {
			factor = 1.25
			NOT = { martial = 7 }
		}
		modifier = {
			factor = 1.25
			NOT = { martial = 6 }
		}
		modifier = {
			factor = 1.25
			NOT = { martial = 5 }
		}
		modifier = {
			factor = 1.25
			NOT = { martial = 4 }
		}
		modifier = {
			factor = 1.25
			NOT = { martial = 3 }
		}
		modifier = {
			factor = 1.25
			NOT = { martial = 2 }
		}
		modifier = {
			factor = 1.25
			NOT = { martial = 1 }
		}
	}

	immediate = {
		set_character_flag = attending_tournament_event_furusiyya
		set_character_flag = tournament_winner_furusiyya
		top_liege = {
			set_character_flag = winner_furusiyya
		}
	}

	option = {
		name = "EVTOPTA88270"
		wealth = 100
		prestige = 300
		if = {
			limit = {
				NOT = { 
					any_liege = {
						dynasty = ROOT
					}
				}
			}
			decadence = -3
		}
		hidden_tooltip = {
			if = {
				limit = {
					top_liege = {
						NOT = {
							character = ROOT
						}
					}
				}
				top_liege = { character_event = { id = 88284 } }
			}
			any_dynasty_member = {
				limit = { 
					ai = no
					NOT = { character = ROOT }
				}
				character_event = { id = 88301 }
			}
		}
	}
}

# Inform about winner
character_event = {
	id = 88284
	title = "FURUSIYYATITLE"
	desc = "EVTDESC88284"
	picture = "GFX_evt_joust"

	is_triggered_only = yes

	option = {
		name = "EVTOPTA88284"
		opinion = {
			modifier = opinion_tournament_winner
			who = FROM
			years = 20
		}
	}
}

# Character wins second place in the tournament
character_event = {
	id = 88271
	title = "FURUSIYYATITLE"
	desc = "EVTDESC88271"
	picture = "GFX_evt_melee"

	min_age = 16
	only_men = yes
	capable_only = yes
	prisoner = no

	trigger = {
		has_character_flag = attending_tournament_furusiyya
		NOT = {
			has_character_flag = tournament_has_ended_furusiyya
			has_character_flag = tournament_winner_furusiyya
		}
		top_liege = {
			had_character_flag = { flag = tournament_begins_furusiyya days = 50 }
			had_character_flag = { flag = winner_furusiyya days = 1 }
			NOT = { has_character_flag = second_place_furusiyya }
			NOT = {
				has_character_flag = tournament_has_ended_furusiyya
			}
		}
	}

	mean_time_to_happen = {
		months = 10
		modifier = {
			factor = 0.5
			top_liege = {
				had_character_flag = { flag = winner_furusiyya days = 10 }
			}
		}
		modifier = {
			factor = 0.5
			top_liege = {
				had_character_flag = { flag = winner_furusiyya days = 20 }
			}
		}
		modifier = {
			factor = 0.5
			top_liege = {
				had_character_flag = { flag = winner_furusiyya days = 30 }
			}
		}
		modifier = {
			factor = 0.5
			top_liege = {
				had_character_flag = { flag = winner_furusiyya days = 40 }
			}
		}
		modifier = {
			factor = 0.5
			top_liege = {
				had_character_flag = { flag = winner_furusiyya days = 50 }
			}
		}
		modifier = {
			factor = 0.75
			martial = 20
		}
		modifier = {
			factor = 0.75
			martial = 19
		}
		modifier = {
			factor = 0.75
			martial = 18
		}
		modifier = {
			factor = 0.75
			martial = 17
		}
		modifier = {
			factor = 0.75
			martial = 16
		}
		modifier = {
			factor = 0.75
			martial = 15
		}
		modifier = {
			factor = 0.75
			martial = 14
		}
		modifier = {
			factor = 0.75
			martial = 13
		}
		modifier = {
			factor = 0.75
			martial = 12
		}
		modifier = {
			factor = 0.75
			martial = 11
		}
		modifier = {
			factor = 1.25
			NOT = { martial = 10 }
		}
		modifier = {
			factor = 1.25
			NOT = { martial = 9 }
		}
		modifier = {
			factor = 1.25
			NOT = { martial = 8 }
		}
		modifier = {
			factor = 1.25
			NOT = { martial = 7 }
		}
		modifier = {
			factor = 1.25
			NOT = { martial = 6 }
		}
		modifier = {
			factor = 1.25
			NOT = { martial = 5 }
		}
		modifier = {
			factor = 1.25
			NOT = { martial = 4 }
		}
		modifier = {
			factor = 1.25
			NOT = { martial = 3 }
		}
		modifier = {
			factor = 1.25
			NOT = { martial = 2 }
		}
		modifier = {
			factor = 1.25
			NOT = { martial = 1 }
		}
	}

	immediate = {
		set_character_flag = attending_tournament_event_furusiyya
		set_character_flag = tournament_second_place_furusiyya
		top_liege = {
			set_character_flag = second_place_furusiyya
		}
	}

	option = {
		name = "EVTOPTA88271"
		wealth = 75
		prestige = 250
		if = {
			limit = {
				religion_group = muslim
				NOT = { 
					any_liege = {
						dynasty = ROOT
					}
				}
			}
			decadence = -2
		}
		hidden_tooltip = {
			if = {
				limit = {
					top_liege = {
						NOT = {
							character = ROOT
						}
					}
				}
				top_liege = { character_event = { id = 88285 } }
			}
			any_dynasty_member = {
				limit = { 
					ai = no
					NOT = { character = ROOT }
				}
				character_event = { id = 88302 }
			}
		}
	}
}

# Inform about second place
character_event = {
	id = 88285
	title = "FURUSIYYATITLE"
	desc = "EVTDESC88285"
	picture = "GFX_evt_joust"

	is_triggered_only = yes

	option = {
		name = "EVTOPTA88285"
		opinion = {
			modifier = opinion_tournament_second_place
			who = FROM
			years = 15
		}
	}
}

# Character wins third place in the tournament
character_event = {
	id = 88272
	title = "FURUSIYYATITLE"
	desc = "EVTDESC88272"
	picture = "GFX_evt_melee"

	min_age = 16
	only_men = yes
	capable_only = yes
	prisoner = no

	trigger = {
		has_character_flag = attending_tournament_furusiyya
		NOT = {
			has_character_flag = tournament_has_ended_furusiyya
			has_character_flag = tournament_winner_furusiyya
			has_character_flag = tournament_second_place_furusiyya
		}
		top_liege = {
			had_character_flag = { flag = tournament_begins_furusiyya days = 50 }
			had_character_flag = { flag = second_place_furusiyya days = 1 }
			NOT = { has_character_flag = third_place_furusiyya }
			NOT = {
				has_character_flag = tournament_has_ended_furusiyya
			}
		}
	}

	mean_time_to_happen = {
		months = 10
		modifier = {
			factor = 0.5
			top_liege = {
				had_character_flag = { flag = second_place_furusiyya days = 10 }
			}
		}
		modifier = {
			factor = 0.5
			top_liege = {
				had_character_flag = { flag = second_place_furusiyya days = 20 }
			}
		}
		modifier = {
			factor = 0.5
			top_liege = {
				had_character_flag = { flag = second_place_furusiyya days = 30 }
			}
		}
		modifier = {
			factor = 0.5
			top_liege = {
				had_character_flag = { flag = second_place_furusiyya days = 40 }
			}
		}
		modifier = {
			factor = 0.5
			top_liege = {
				had_character_flag = { flag = second_place_furusiyya days = 50 }
			}
		}
		modifier = {
			factor = 0.75
			martial = 20
		}
		modifier = {
			factor = 0.75
			martial = 19
		}
		modifier = {
			factor = 0.75
			martial = 18
		}
		modifier = {
			factor = 0.75
			martial = 17
		}
		modifier = {
			factor = 0.75
			martial = 16
		}
		modifier = {
			factor = 0.75
			martial = 15
		}
		modifier = {
			factor = 0.75
			martial = 14
		}
		modifier = {
			factor = 0.75
			martial = 13
		}
		modifier = {
			factor = 0.75
			martial = 12
		}
		modifier = {
			factor = 0.75
			martial = 11
		}
		modifier = {
			factor = 1.25
			NOT = { martial = 10 }
		}
		modifier = {
			factor = 1.25
			NOT = { martial = 9 }
		}
		modifier = {
			factor = 1.25
			NOT = { martial = 8 }
		}
		modifier = {
			factor = 1.25
			NOT = { martial = 7 }
		}
		modifier = {
			factor = 1.25
			NOT = { martial = 6 }
		}
		modifier = {
			factor = 1.25
			NOT = { martial = 5 }
		}
		modifier = {
			factor = 1.25
			NOT = { martial = 4 }
		}
		modifier = {
			factor = 1.25
			NOT = { martial = 3 }
		}
		modifier = {
			factor = 1.25
			NOT = { martial = 2 }
		}
		modifier = {
			factor = 1.25
			NOT = { martial = 1 }
		}
	}

	immediate = {
		set_character_flag = attending_tournament_event_furusiyya
		set_character_flag = tournament_third_place_furusiyya
		top_liege = {
			set_character_flag = third_place_furusiyya
		}
	}

	option = {
		name = "EVTOPTA88272"
		wealth = 50
		prestige = 200
		if = {
			limit = {
				NOT = { 
					any_liege = {
						dynasty = ROOT
					}
				}
			}
			decadence = -1
		}
		hidden_tooltip = {
			if = {
				limit = {
					top_liege = {
						NOT = {
							character = ROOT
						}
					}
				}
				top_liege = { character_event = { id = 88286 } }
			}
			any_dynasty_member = {
				limit = { 
					ai = no
					NOT = { character = ROOT }
				}
				character_event = { id = 88303 }
			}
		}
	}
}

# Inform about third place
character_event = {
	id = 88286
	title = "FURUSIYYATITLE"
	desc = "EVTDESC88286"
	picture = "GFX_evt_joust"

	is_triggered_only = yes

	option = {
		name = "EVTOPTA88286"
		opinion = {
			modifier = opinion_tournament_third_place
			who = FROM
			years = 10
		}
	}
}

# Character becomes homosexual
character_event = {
	id = 88273
	title = "FURUSIYYATITLE"
	desc = "EVTDESC88273"
	picture = "GFX_evt_lunatic_muslim"

	min_age = 16
	only_men = yes
	capable_only = yes
	prisoner = no

	trigger = {
		has_character_flag = attending_tournament_furusiyya
		NOT = { has_character_flag = attending_tournament_event_furusiyya }
		NOT = { has_character_flag = tournament_has_ended_furusiyya }
		NOT = {
			OR = {
				trait = homosexual
				trait = homosexual_hidden
			}
		}
	}

	mean_time_to_happen = {
		months = 800
		modifier = {
			factor = 0.9
			OR = {
				trait = drunkard
				trait = drunkard_hidden
			}
		}
		modifier = {
			factor = 0.9
			OR = {
				trait = excommunicated
				trait = excommunicated_hidden
			}
		}
		modifier = {
			factor = 0.9
			OR = {
				trait = ugly
				trait = ugly_hidden
			}
		}
		modifier = {
			factor = 1.5
			OR = {
				trait = fair
				trait = fair_hidden
			}
		}
		modifier = {
			factor = 0.9
			OR = {
				trait = celibate
				trait = celibate_hidden
			}
		}
		modifier = {
			factor = 0.9
			OR = {
				trait = hedonist
				trait = hedonist_hidden
			}
		}
		modifier = {
			factor = 0.5
			OR = {
				trait = impaler
				trait = impaler_hidden
			}
		}
		modifier = {
			factor = 1.5
			OR = {
				trait = lustful
				trait = lustful_hidden
			}
		}
		modifier = {
			factor = 0.9
			OR = {
				trait = chaste
				trait = chaste_hidden
			}
		}
		modifier = {
			factor = 3
			OR = {
				trait = zealous
				trait = zealous_hidden
			}
		}
	}

	immediate = {
		set_character_flag = attending_tournament_event_furusiyya
	}

	option = {
		name = "EVTOPTA88273"
		add_trait = homosexual_hidden
	}
}

# Character becomes syphilitic
character_event = {
	id = 88274
	title = "FURUSIYYATITLE"
	desc = "EVTDESC88274"
	picture = "GFX_evt_sultan"

	min_age = 16
	only_men = yes
	capable_only = yes
	prisoner = no

	trigger = {
		has_character_flag = attending_tournament_furusiyya
		NOT = { has_character_flag = attending_tournament_event_furusiyya }
		NOT = { has_character_flag = tournament_has_ended_furusiyya }
		NOT = {
			OR = {
				trait = syphilitic
				trait = syphilitic_hidden
			}
			OR = {
				trait = celibate
				trait = celibate_hidden
			}
		}
	}

	mean_time_to_happen = {
		months = 800
		modifier = {
			factor = 1.5
			OR = {
				trait = ugly
				trait = ugly_hidden
			}
		}
		modifier = {
			factor = 0.9
			OR = {
				trait = fair
				trait = fair_hidden
			}
		}
		modifier = {
			factor = 0.9
			OR = {
				trait = hedonist
				trait = hedonist_hidden
			}
		}
		modifier = {
			factor = 0.5
			OR = {
				trait = impaler
				trait = impaler_hidden
			}
		}
		modifier = {
			factor = 0.9
			OR = {
				trait = lustful
				trait = lustful_hidden
			}
		}
		modifier = {
			factor = 2
			OR = {
				trait = chaste
				trait = chaste_hidden
			}
		}
		modifier = {
			factor = 3
			OR = {
				trait = zealous
				trait = zealous_hidden
			}
		}
	}

	immediate = {
		set_character_flag = attending_tournament_event_furusiyya
	}

	option = {
		name = "EVTOPTA88274"
		add_trait = syphilitic_hidden
	}
}

# Character becomes drunkard
character_event = {
	id = 88275
	title = "FURUSIYYATITLE"
	desc = "EVTDESC88275"
	picture = "GFX_evt_drunk"

	min_age = 16
	only_men = yes
	capable_only = yes
	prisoner = no

	trigger = {
		has_character_flag = attending_tournament_furusiyya
		NOT = { has_character_flag = attending_tournament_event_furusiyya }
		NOT = { has_character_flag = tournament_has_ended_furusiyya }
		NOT = {
			OR = {
				trait = drunkard
				trait = drunkard_hidden
			}
		}
	}

	mean_time_to_happen = {
		months = 500
		modifier = {
			factor = 0.5
			OR = {
				trait = depressed
				trait = depressed_hidden
			}
		}
		modifier = {
			factor = 1.5
			OR = {
				trait = strong
				trait = strong_hidden
			}
		}
		modifier = {
			factor = 0.9
			OR = {
				trait = dwarf
				trait = dwarf_hidden
			}
		}
		modifier = {
			factor = 0.9
			OR = {
				trait = gluttonous
				trait = gluttonous_hidden
			}
		}
		modifier = {
			factor = 0.9
			OR = {
				trait = lustful
				trait = lustful_hidden
			}
		}
		modifier = {
			factor = 3
			OR = {
				trait = temperate
				trait = temperate_hidden
			}
		}
		modifier = {
			factor = 0.9
			OR = {
				trait = greedy
				trait = greedy_hidden
			}
		}
	}

	immediate = {
		set_character_flag = attending_tournament_event_furusiyya
	}

	option = {
		name = "EVTOPTA88275"
		add_trait = drunkard_hidden
	}
}

# Character becomes duelist
character_event = {
	id = 88276
	title = "FURUSIYYATITLE"
	desc = "EVTDESC88276"
	picture = "GFX_evt_melee"

	min_age = 16
	only_men = yes
	capable_only = yes
	prisoner = no

	trigger = {
		has_character_flag = attending_tournament_furusiyya
		NOT = { has_character_flag = attending_tournament_event_furusiyya }
		NOT = { has_character_flag = tournament_has_ended_furusiyya }
		NOT = {
			lifestyle_traits = 1
		}
	}

	mean_time_to_happen = {
		months = 500
		modifier = {
			factor = 0.9
			OR = {
				trait = wroth
				trait = wroth_hidden
			}
		}
		modifier = {
			factor = 1.5
			OR = {
				trait = kind
				trait = kind_hidden
			}
		}
		modifier = {
			factor = 0.9
			OR = {
				trait = proud
				trait = proud_hidden
			}
		}
		modifier = {
			factor = 1.5
			OR = {
				trait = humble
				trait = humble_hidden
			}
		}
		modifier = {
			factor = 1.5
			OR = {
				trait = craven
				trait = craven_hidden
			}
		}
		modifier = {
			factor = 0.9
			OR = {
				trait = brave
				trait = brave_hidden
			}
		}
		modifier = {
			factor = 1.5
			OR = {
				trait = just
				trait = just_hidden
			}
		}
		modifier = {
			factor = 0.9
			OR = {
				trait = cruel
				trait = cruel_hidden
			}
		}
	}

	immediate = {
		set_character_flag = attending_tournament_event_furusiyya
	}

	option = {
		name = "EVTOPTA88276"
		add_trait = duelist_hidden
	}
}

# Character gains intrigue
character_event = {
	id = 88277
	title = "FURUSIYYATITLE"
	desc = "EVTDESC88277"
	picture = "GFX_evt_whispers"

	min_age = 16
	only_men = yes
	capable_only = yes
	prisoner = no

	trigger = {
		has_character_flag = attending_tournament_furusiyya
		NOT = { has_character_flag = attending_tournament_event_furusiyya }
		NOT = { has_character_flag = tournament_has_ended_furusiyya }
	}

	mean_time_to_happen = {
		months = 250
		modifier = {
			factor = 0.8
			OR = {
				trait = elusive_shadow
				trait = elusive_shadow_hidden
			}
		}
		modifier = {
			factor = 0.9
			OR = {
				trait = intricate_webweaver
				trait = intricate_webweaver_hidden
			}
		}
		modifier = {
			factor = 1.1
			OR = {
				trait = flamboyant_schemer
				trait = flamboyant_schemer_hidden
			}
		}
		modifier = {
			factor = 1.5
			OR = {
				trait = amateurish_plotter
				trait = amateurish_plotter_hidden
			}
		}
		modifier = {
			factor = 1.5
			NOT = {
				OR = {
					OR = {
						trait = elusive_shadow
						trait = elusive_shadow_hidden
					}
					OR = {
						trait = intricate_webweaver
						trait = intricate_webweaver_hidden
					}
					OR = {
						trait = flamboyant_schemer
						trait = flamboyant_schemer_hidden
					}
					OR = {
						trait = amateurish_plotter
						trait = amateurish_plotter_hidden
					}
				}
			}
		}
		modifier = {
			factor = 0.9
			OR = {
				trait = deceitful
				trait = deceitful_hidden
			}
		}
		modifier = {
			factor = 1.5
			OR = {
				trait = honest
				trait = honest_hidden
			}
		}
		modifier = {
			factor = 4
			martial = 10
		}
		modifier = {
			factor = 0.8
			NOT = {
				martial = 5
			}
		}
	}

	immediate = {
		set_character_flag = attending_tournament_event_furusiyya
	}

	option = {
		name = "EVTOPTA88277"
		change_intrigue = 1
	}
}

# Character loses intrigue
character_event = {
	id = 88278
	title = "FURUSIYYATITLE"
	desc = "EVTDESC88278"
	picture = "GFX_evt_whispers"

	min_age = 16
	only_men = yes
	capable_only = yes
	prisoner = no

	trigger = {
		has_character_flag = attending_tournament_furusiyya
		NOT = { has_character_flag = attending_tournament_event_furusiyya }
		NOT = { has_character_flag = tournament_has_ended_furusiyya }
	}

	mean_time_to_happen = {
		months = 250
		modifier = {
			factor = 1.5
			OR = {
				trait = elusive_shadow
				trait = elusive_shadow_hidden
			}
		}
		modifier = {
			factor = 1.1
			OR = {
				trait = intricate_webweaver
				trait = intricate_webweaver_hidden
			}
		}
		modifier = {
			factor = 0.9
			OR = {
				trait = flamboyant_schemer
				trait = flamboyant_schemer_hidden
			}
		}
		modifier = {
			factor = 0.8
			OR = {
				trait = amateurish_plotter
				trait = amateurish_plotter_hidden
			}
		}
		modifier = {
			factor = 1.5
			NOT = {
				OR = {
					OR = {
						trait = elusive_shadow
						trait = elusive_shadow_hidden
					}
					OR = {
						trait = intricate_webweaver
						trait = intricate_webweaver_hidden
					}
					OR = {
						trait = flamboyant_schemer
						trait = flamboyant_schemer_hidden
					}
					OR = {
						trait = amateurish_plotter
						trait = amateurish_plotter_hidden
					}
				}
			}
		}
		modifier = {
			factor = 1.5
			OR = {
				trait = deceitful
				trait = deceitful_hidden
			}
		}
		modifier = {
			factor = 0.9
			OR = {
				trait = honest
				trait = honest_hidden
			}
		}
		modifier = {
			factor = 4
			martial = 10
		}
		modifier = {
			factor = 0.8
			NOT = {
				martial = 5
			}
		}
	}

	immediate = {
		set_character_flag = attending_tournament_event_furusiyya
	}

	option = {
		name = "EVTOPTA88278"
		change_intrigue = -1
	}
}

# Character gains stewardship
character_event = {
	id = 88279
	title = "FURUSIYYATITLE"
	desc = "EVTDESC88279"
	picture = "GFX_evt_market"

	min_age = 16
	only_men = yes
	capable_only = yes
	prisoner = no

	trigger = {
		has_character_flag = attending_tournament_furusiyya
		NOT = { has_character_flag = attending_tournament_event_furusiyya }
		NOT = { has_character_flag = tournament_has_ended_furusiyya }
	}

	mean_time_to_happen = {
		months = 250
		modifier = {
			factor = 0.8
			OR = {
				trait = midas_touched
				trait = midas_touched_hidden
			}
		}
		modifier = {
			factor = 0.9
			OR = {
				trait = fortune_builder
				trait = fortune_builder_hidden
			}
		}
		modifier = {
			factor = 1.1
			OR = {
				trait = thrifty_clerk
				trait = thrifty_clerk_hidden
			} 
		}
		modifier = {
			factor = 1.5
			OR = {
				trait = indulgent_wastrel
				trait = indulgent_wastrel_hidden
			}
		}
		modifier = {
			factor = 1.5
			NOT = {
				OR = {
					OR = {
						trait = midas_touched
						trait = midas_touched_hidden
					} 
					OR = {
						trait = fortune_builder
						trait = fortune_builder_hidden
					}
					OR = {
						trait = thrifty_clerk
						trait = thrifty_clerk_hidden
					} 
					OR = {
						trait = indulgent_wastrel
						trait = indulgent_wastrel_hidden
					}
				}
			}
		}
		modifier = {
			factor = 0.9
			OR = {
				trait = diligent
				trait = diligent_hidden
			} 
		}
		modifier = {
			factor = 1.5
			OR = {
				trait = slothful
				trait = slothful_hidden
			}
		}
		modifier = {
			factor = 4
			martial = 10
		}
		modifier = {
			factor = 0.8
			NOT = {
				martial = 5
			}
		}
	}

	immediate = {
		set_character_flag = attending_tournament_event_furusiyya
	}

	option = {
		name = "EVTOPTA88279"
		change_stewardship = 1
	}
}

# Character loses stewardship
character_event = {
	id = 88280
	title = "FURUSIYYATITLE"
	desc = "EVTDESC88280"
	picture = "GFX_evt_market"

	min_age = 16
	only_men = yes
	capable_only = yes
	prisoner = no

	trigger = {
		has_character_flag = attending_tournament_furusiyya
		NOT = { has_character_flag = attending_tournament_event_furusiyya }
		NOT = { has_character_flag = tournament_has_ended_furusiyya }
	}

	mean_time_to_happen = {
		months = 250
		modifier = {
			factor = 1.5
			OR = {
				trait = midas_touched
				trait = midas_touched_hidden
			} 
		}
		modifier = {
			factor = 1.1
			OR = {
				trait = fortune_builder
				trait = fortune_builder_hidden
			}
		}
		modifier = {
			factor = 0.9
			OR = {
				trait = thrifty_clerk
				trait = thrifty_clerk_hidden
			} 
		}
		modifier = {
			factor = 0.8
			OR = {
				trait = indulgent_wastrel
				trait = indulgent_wastrel_hidden
			}
		}
		modifier = {
			factor = 1.5
			NOT = {
				OR = {
					OR = {
						trait = midas_touched
						trait = midas_touched_hidden
					}
					OR = {
						trait = fortune_builder
						trait = fortune_builder_hidden
					}
					OR = {
						trait = thrifty_clerk
						trait = thrifty_clerk_hidden
					} 
					OR = {
						trait = indulgent_wastrel
						trait = indulgent_wastrel_hidden
					}
				}
			}
		}
		modifier = {
			factor = 1.5
			OR = {
				trait = diligent
				trait = diligent_hidden
			} 
		}
		modifier = {
			factor = 0.9
			OR = {
				trait = slothful
				trait = slothful_hidden
			}
		}
		modifier = {
			factor = 4
			martial = 10
		}
		modifier = {
			factor = 0.8
			NOT = {
				martial = 5
			}
		}
	}

	immediate = {
		set_character_flag = attending_tournament_event_furusiyya
	}

	option = {
		name = "EVTOPTA88280"
		change_stewardship = -1
	}
}

# Character gains diplomacy
character_event = {
	id = 88281
	title = "FURUSIYYATITLE"
	desc = "EVTDESC88281"
	picture = "GFX_evt_council"

	min_age = 16
	only_men = yes
	capable_only = yes
	prisoner = no

	trigger = {
		has_character_flag = attending_tournament_furusiyya
		NOT = { has_character_flag = attending_tournament_event_furusiyya }
		NOT = { has_character_flag = tournament_has_ended_furusiyya }
	}

	mean_time_to_happen = {
		months = 250
		modifier = {
			factor = 0.8
			OR = {
				trait = grey_eminence
				trait = grey_eminence_hidden
			} 
		}
		modifier = {
			factor = 0.9
			OR = {
				trait = charismatic_negotiator
				trait = charismatic_negotiator_hidden
			}
		}
		modifier = {
			factor = 1.1
			OR = {
				trait = underhanded_rogue
				trait = underhanded_rogue_hidden
			}
		}
		modifier = {
			factor = 1.5
			OR = {
				trait = naive_appeaser
				trait = naive_appeaser_hidden
			}
		}
		modifier = {
			factor = 1.5
			NOT = {
				OR = {
					OR = {
						trait = grey_eminence
						trait = grey_eminence_hidden
					} 
					OR = {
						trait = charismatic_negotiator
						trait = charismatic_negotiator_hidden
					}
					OR = {
						trait = underhanded_rogue
						trait = underhanded_rogue_hidden
					}
					OR = {
						trait = naive_appeaser
						trait = naive_appeaser_hidden
					}
				}
			}
		}
		modifier = {
			factor = 0.9
			OR = {
				trait = gregarious
				trait = gregarious_hidden
			}
		}
		modifier = {
			factor = 1.5
			OR = {
				trait = shy
				trait = shy_hidden
			}
		}
		modifier = {
			factor = 4
			martial = 10
		}
		modifier = {
			factor = 0.8
			NOT = {
				martial = 5
			}
		}
	}

	immediate = {
		set_character_flag = attending_tournament_event_furusiyya
	}

	option = {
		name = "EVTOPTA88281"
		change_diplomacy = 1
	}
}

# Character loses diplomacy
character_event = {
	id = 88282
	title = "FURUSIYYATITLE"
	desc = "EVTDESC88282"
	picture = "GFX_evt_council"

	min_age = 16
	only_men = yes
	capable_only = yes
	prisoner = no

	trigger = {
		has_character_flag = attending_tournament_furusiyya
		NOT = { has_character_flag = attending_tournament_event_furusiyya }
		NOT = { has_character_flag = tournament_has_ended_furusiyya }
	}

	mean_time_to_happen = {
		months = 250
		modifier = {
			factor = 1.5
			OR = {
				trait = grey_eminence
				trait = grey_eminence_hidden
			} 
		}
		modifier = {
			factor = 1.1
			OR = {
				trait = charismatic_negotiator
				trait = charismatic_negotiator_hidden
			}
		}
		modifier = {
			factor = 0.9
			OR = {
				trait = underhanded_rogue
				trait = underhanded_rogue_hidden
			}
		}
		modifier = {
			factor = 0.8
			OR = {
				trait = naive_appeaser
				trait = naive_appeaser_hidden
			}
		}
		modifier = {
			factor = 1.5
			NOT = {
				OR = {
					OR = {
						trait = grey_eminence
						trait = grey_eminence_hidden
					} 
					OR = {
						trait = charismatic_negotiator
						trait = charismatic_negotiator_hidden
					}
					OR = {
						trait = underhanded_rogue
						trait = underhanded_rogue_hidden
					}
					OR = {
						trait = naive_appeaser
						trait = naive_appeaser_hidden
					}
				}
			}
		}
		modifier = {
			factor = 1.5
			OR = {
				trait = gregarious
				trait = gregarious_hidden
			}
		}
		modifier = {
			factor = 0.9
			OR = {
				trait = shy
				trait = shy_hidden
			}
		}
		modifier = {
			factor = 4
			martial = 10
		}
		modifier = {
			factor = 0.8
			NOT = {
				martial = 5
			}
		}
	}

	immediate = {
		set_character_flag = attending_tournament_event_furusiyya
	}

	option = {
		name = "EVTOPTA88282"
		change_diplomacy = -1
	}
}

# Invitations have gone out
character_event = {
	id = 88283
	title = "FURUSIYYATITLE"
	desc = "EVTDESC88283"
	picture = "GFX_evt_moors"

	is_triggered_only = yes

	option = {
		name = "EVTOPTA88283"
	}
}

# Ruler has died, the tournament is over
character_event = {
	id = 88291
	title = "FURUSIYYATITLE"
	desc = "EVTDESC88291"
	picture = "GFX_evt_death"

	is_triggered_only = yes

	trigger = {
		has_character_flag = tournament_begins_furusiyya
	}

	option = {
		name = "EVTOPTA88291"
		clr_character_flag = tournament_begins_furusiyya
		clr_character_flag = winner_furusiyya
		clr_character_flag = second_place_furusiyya
		clr_character_flag = third_place_furusiyya
		clr_character_flag = attending_tournament_furusiyya
		clr_character_flag = attending_tournament_event_furusiyya
		clr_character_flag = tournament_third_place_furusiyya
		clr_character_flag = tournament_second_place_furusiyya
		clr_character_flag = tournament_winner_furusiyya
		any_vassal = {
			limit = {
				has_character_flag = attending_tournament_furusiyya
				NOT = {
					character = PREV
				}
				NOT = {
					has_character_flag = tournament_third_place_furusiyya
				}
				NOT = {
					has_character_flag = tournament_second_place_furusiyya
				}
				NOT = {
					has_character_flag = tournament_winner_furusiyya
				}
			}
			set_character_flag = tournament_has_ended_furusiyya
			clr_character_flag = attending_tournament_furusiyya
			clr_character_flag = attending_tournament_event_furusiyya
			letter_event = {
				id = 88292
				days = 2
				random = 2
				tooltip = "EVTTOOLTIP88292"
			}
		}
		any_vassal = {
			limit = {
				has_character_flag = attending_tournament_furusiyya
				OR = {
					has_character_flag = tournament_third_place_furusiyya
					has_character_flag = tournament_second_place_furusiyya
					has_character_flag = tournament_winner_furusiyya
				}
			}
			letter_event = {
				id = 88292
				days = 2
				random = 2
				tooltip = "EVTTOOLTIP88292"
			}
			set_character_flag = tournament_has_ended_furusiyya
			clr_character_flag = tournament_third_place_furusiyya
			clr_character_flag = tournament_second_place_furusiyya
			clr_character_flag = tournament_winner_furusiyya
			clr_character_flag = attending_tournament_furusiyya
			clr_character_flag = attending_tournament_event_furusiyya
		}
	}
}

#The tournament has been cancelled due to Ruler's death
letter_event = {
	id = 88292
	title = "FURUSIYYATITLE"
	desc = "EVTDESC88292"
	picture = "GFX_evt_death"

	is_triggered_only = yes

	option = {
		name = "EVTOPTA88292"
	}
}

### Decadence notifications

# Furusiyya held
character_event = {
	id = 88300
	desc = "EVTDESC88300"
	picture = "GFX_evt_joust_muslim"

	is_triggered_only = yes

	option = {
		name = "EVTOPTA88300"
	}
}

# Tournament Winner
character_event = {
	id = 88301
	desc = "EVTDESC88301"
	picture = "GFX_evt_joust_muslim"

	is_triggered_only = yes

	option = {
		name = "EVTOPTA88301"
	}
}

# Tournament Second Place
character_event = {
	id = 88302
	desc = "EVTDESC88302"
	picture = "GFX_evt_joust_muslim"

	is_triggered_only = yes

	option = {
		name = "EVTOPTA88302"
	}
}

# Tournament Third Place
character_event = {
	id = 88303
	desc = "EVTDESC88303"
	picture = "GFX_evt_joust_muslim"

	is_triggered_only = yes

	option = {
		name = "EVTOPTA88303"
	}
}

###########################################
# Flag management                         #
###########################################

# Safety catch - clears character flags and modifiers
character_event = {
	id = 88999

	hide_window = yes
	
	is_triggered_only = yes
	
	immediate = {
		clr_character_flag = do_not_disturb
		clr_character_flag = attending_tournament_furusiyya
		clr_character_flag = no_msg_death_furusiyya
		clr_character_flag = no_msg_maimed_furusiyya
		clr_character_flag = no_msg_wounded_furusiyya
		clr_character_flag = tournament_has_ended_furusiyya
		clr_character_flag = attending_tournament_event_furusiyya
		clr_character_flag = tournament_winner_furusiyya
		clr_character_flag = winner_furusiyya
		clr_character_flag = tournament_second_place_furusiyya
		clr_character_flag = second_place_furusiyya
		clr_character_flag = tournament_third_place_furusiyya
		clr_character_flag = third_place_furusiyya
	}
}

